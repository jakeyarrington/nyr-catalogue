<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="/dist/css/app.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Neal's Yard Catalogue</title>
    <script>
      if(location.href[location.href.length-1] == '/' && location.pathname !== '/') {
        location.href = location.href.substring(0, location.href.length-1);
      }
      if ('serviceWorker' in navigator) {
        // Register a service worker hosted at the root of the
        // site using the default scope.
        navigator.serviceWorker.register('/pwa-sw.js').then(function(registration) {
          console.log('Service worker registration succeeded:', registration);
        }, /*catch*/ function(error) {
          console.log('Service worker registration failed:', error);
        });
      } else {
        console.log('Service workers are not supported.');
      }
    </script>
  </head>

  <body ng-app="nyr" ng-controller="app">

    <div id="options" class="modal">
      <div class="modal-content center-align">
        <h4>Thanks for Reading!</h4>
        <p>Before you go, here are some additional options to choose from.</p>
        <p>
          <div class="collection">
            <a ng-show="favourite.$count" href="#" ng-click="mail_favourites()" class="collection-item">Email my Favourites to <span ng-bind="consultant.data.name.first_name"></span></a>
            <a href="#!" ng-show="can_install_app" ng-click="install_app()" class="collection-item">Install <span ng-bind="consultant.data.name.first_name"></span>'s App</a>
             <a ng-href="{{'https://uk.nyrorganic.com/shop/' + consultant.data.slug}}" class="collection-item">View <span ng-bind="consultant.data.name.first_name"></span>'s NYR Organic Shop</a>
            <a ng-href="{{pdf_url}}" class="collection-item">Download this Smart Catalogue</a>
            <a ng-href="{{'https://uk.nyrorganic.com/shop/'+consultant.data.slug+'/area/become-a-consultant/'}}" class="collection-item">Become a Consultant</a>
            <a ng-href="{{'https://uk.nyrorganic.com/shop/'+consultant.data.slug+'/area/have-a-party/'}}" class="collection-item">Host an Event</a>
          </div>
        </p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>

    <div id="configurator" class="modal">

      <div class="row">
        <div>
          <ul class="tabs">
            <li class="tab col s6"><a class="active" href="#config">Configure Profile</a></li>
            <li class="tab col s6"><a href="#party">Configure Party Links</a></li>
          </ul>
        </div>
        <div id="config" class="col s12">
          <div class="modal-content center-align">
            <div class="row">
              <div class="col s12">
                <h4>Configure Catalogue</h4>
                <p>Configure your NYR Organic Smart Catalogue by entering your information below. This information is used to link customers to your shop, social media accounts and to contact you.</p>
              </div>
            </div>
            <div>
              <div class="progress" ng-show="consultant_query.loading">
                  <div class="indeterminate"></div>
              </div>
              <div class="row" ng-show="!consultant_query.loading">
                <form class="col s12">
                  <div class="row">
                    <div class="input-field col s6">
                      <input ng-model="consultant_query.first_name" placeholder="Ellie" id="first_name" type="text" class="validate">
                      <label for="first_name">First Name</label>
                    </div>
                    <div class="input-field col s6">
                      <input ng-model="consultant_query.last_name" placeholder="Smith" id="last_name" type="text" class="validate">
                      <label for="last_name">Last Name</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.email" id="email" placeholder="ellie.smith@gmail.com" type="email" class="validate">
                      <label for="email">Email</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.url" id="url" placeholder="https://uk.nyrorganic.com/shop/elliesmith" type="url" class="validate">
                      <label for="url">Your NYR Organic URL</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.phone" id="phone" placeholder="07957931543" type="text" class="validate">
                      <label for="phone">Your Telephone Number</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <select ng-model="consultant_query.region">
                        <option value="uk">UK/IE</option>
                        <option value="us">US</option>
                      </select>
                      <label>Country</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <select ng-model="consultant_query.app_launch">
                        <option value="catalogue">My NYR Catalogue</option>
                        <option value="shop">My NYR Shop</option>
                      </select>
                      <label>App Launch</label>
                      <p class="left-align"><small>When a customer downloads and open your app on desktop and mobile, where would you like them to be taken to?</small></p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.twitter" id="twitter" placeholder="https://twitter.com/elliesmith" type="url" class="validate">
                      <label for="phone">Your Twitter URL</label>
                      <p class="left-align"><small>Enter your Twitter @handle or full URL, leave blank if you don't have one.</small></p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.facebook" id="facebook" placeholder="https://facebook.com/elliesmith" type="url" class="validate">
                      <label for="phone">Your Facebook URL</label>
                      <p class="left-align"><small>Enter your Facebook URL, leave blank if you don't have one.</small></p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.instagram" id="instagram" placeholder="https://instagram.com/elliesmith" type="url" class="validate">
                      <label for="phone">Your Instagram URL</label>
                      <p class="left-align"><small>Enter your Instagram URL, leave blank if you don't have one.</small></p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.linkedin" id="linkedin" placeholder="https://linkedin.com/in/elliesmith" type="url" class="validate">
                      <label for="phone">Your LinkedIn URL</label>
                      <p class="left-align"><small>Enter your LinkedIn URL, leave blank if you don't have one.</small></p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input ng-model="consultant_query.pinterest" id="pinterest" placeholder="https://pinterest.com/elliesmith" type="url" class="validate">
                      <label for="phone">Your Pinterest URL</label>
                      <p class="left-align"><small>Enter your Pinterest URL, leave blank if you don't have one.</small></p>
                    </div>
                  </div>
                </form>
            </div>
          </div>
          <div class="modal-footer">
            <div class="row" ng-show="!consultant_query.loading">
              <div class="col s12 right-align">
                <button class="btn waves-effect waves-light" ng-click="save_configurator()" type="button">Save
                  <i class="material-icons right">save</i>
                </button>
                <button ng-click="close_modal('#configurator')" class="btn waves-effect waves-light" type="button">Cancel</button>
              </div>
            </div>
          </div>
        </div>
        </div>
        <div id="party" class="col s12">
          <div class="modal-content center-align">
            <div class="row">
              <div class="col s12">
                <h4>Configure Party Links</h4>
                <p>You can configure Party Links to automatically associate products to a Consultants party on check-out.</p>
                <div class="row">
                  <form class="col s12">
                    <div class="row">
                      <div class="input-field col s12" ng-repeat="(i, code) in consultant_party_codes">
                        <input required="required" ng-model="consultant_party_codes[i].code" placeholder="W001923564" type="text" class="validate">
                        <label for="phone active">Party Code</label>
                        <p class="left-align"><small>Enter your unique Party Code, please ensure the party is active and has not expired.</small></p>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div class="row" ng-show="!consultant_query.loading">
                <div class="col s12 right-align">
                  <button class="btn waves-effect waves-light" ng-click="add_party_code()" type="button">Add Another Party Code</button>
                  <button class="btn waves-effect waves-light" ng-click="save_party_codes()" type="button">Save</button>
                </div>
                <div class="col s12 center-align" ng-show='saving_party_codes'>
                  <div class="progress">
                      <div class="indeterminate"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="share" class="modal">
      <div class="modal-content center-align">
        <h4>Share <span ng-bind="consultant.data.name.full ? consultant.data.name.full + '\'s' : 'this'"></span> Smart Catalogue</h4>
        <p>Select a social media platform below to share to.</p>
        <p>
          <a target="_blank" ng-href="{{'https://www.facebook.com/sharer/sharer.php?u=https://vibrant-edison-0f2684.netlify.app/' + consultant.data.slug}}" class="waves-effect waves-light btn">Facebook</a>
          <a target="_blank" ng-href="{{'https://twitter.com/intent/tweet?url=https://vibrant-edison-0f2684.netlify.app/'+consultant.data.slug+'&text=Check%20out%20'+consultant.data.name.full+'\'s%20NYR%20smart%20catalogue'}}" class="waves-effect waves-light btn">Twitter</a>
          <a target="_blank" ng-href="{{'https://pinterest.com/pin/create/button/?url=https://vibrant-edison-0f2684.netlify.app/'+consultant.data.slug+'&media=&description=Check%20out%20'+consultant.data.name.full+'\'s%20NYR%20smart%20catalogue'}}" class="waves-effect waves-light btn">Pinterest</a>
          <a target="_blank" ng-href="{{'https://www.linkedin.com/shareArticle?mini=true&url=https://vibrant-edison-0f2684.netlify.app/'+consultant.data.slug}}" class="waves-effect waves-light btn">LinkedIn</a>
          <a target="_blank" ng-href="{{'mailto:info@example.com?&subject=&cc=&bcc=&body=https://vibrant-edison-0f2684.netlify.app/'+consultant.data.slug+'%0ACheck%20out%'+consultant.data.name.full+'\'s%20NYR%20smart%20catalogue'}}" class="waves-effect waves-light btn">Email</a>
        </p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>

    <div id="contact" class="modal">
      <div class="modal-content center-align">
        <img width="150" ng-src="{{'https://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=' + catalogue_url}}">
        <h4>Contact <span ng-bind="consultant.data.name.full"></span></h4>
        <p>Here are the ways you can get in touch with <span ng-bind="consultant.data.name.first_name"></span> directly.</p>
        <p>
          <a target="_blank" ng-show="consultant.data.email" ng-href="{{'mailto:' + consultant.data.email}}" class="waves-effect waves-light btn">Email</a>
          <a target="_blank" ng-show="consultant.data.phone" ng-href="{{'tel:' + consultant.data.phone}}" class="waves-effect waves-light btn">Telephone</a>
          <a target="_blank" ng-show="consultant.data.social.facebook" ng-href="{{consultant.data.social.facebook}}" class="waves-effect waves-light btn">Facebook</a>
          <a target="_blank" ng-show="consultant.data.social.instagram" ng-href="{{consultant.data.social.instagram}}" class="waves-effect waves-light btn">Instagram</a>
          <a target="_blank" ng-show="consultant.data.social.linkedin" ng-href="{{consultant.data.social.linkedin}}" class="waves-effect waves-light btn">LinkedIn</a>
          <a target="_blank" ng-show="consultant.data.social.pinterest" ng-href="{{consultant.data.social.pinterest}}" class="waves-effect waves-light btn">Pinterest</a>
          <a target="_blank" ng-show="consultant.data.social.twitter" ng-href="{{consultant.data.social.twitter}}" class="waves-effect waves-light btn">Twitter</a>
        </p>
          <div class="collection">
            <a ng-show="favourite.$count" href="#" ng-click="mail_favourites()" class="collection-item">Email my Favourites to <span ng-bind="consultant.data.name.first_name"></span></a>
            <a href="#!" ng-show="can_install_app" ng-click="install_app()" class="collection-item">Install <span ng-bind="consultant.data.name.first_name"></span>'s App</a>
             <a ng-href="{{'https://uk.nyrorganic.com/shop/' + consultant.data.slug}}" class="collection-item">View <span ng-bind="consultant.data.name.first_name"></span>'s NYR Organic Shop</a>
            <a ng-href="{{pdf_url}}" class="collection-item">Download this Smart Catalogue</a>
            <a ng-href="{{'https://uk.nyrorganic.com/shop/'+consultant.data.slug+'/area/become-a-consultant/'}}" class="collection-item">Become a Consultant</a>
            <a ng-href="{{'https://uk.nyrorganic.com/shop/'+consultant.data.slug+'/area/have-a-party/'}}" class="collection-item">Host an Event</a>
          </div>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>

    <div class="progress loading-page">
        <div class="indeterminate"></div>
    </div>

      <nav>
        <div class="nav-wrapper">
        <ul id="nav-mobile">
          <li>
            <a href="#" data-target="basket_sidebar" class="sidenav-trigger tooltipped" data-position="right" data-tooltip="Available Items">
              <i class="material-icons">shopping_basket</i>
            </a>
          </li>
          <li>
            <a href="#share" class="modal-trigger tooltipped" data-position="right" data-tooltip="Share Catalogue">
              <span class="material-icons">share</span>
            </a>
          </li>
          <li>
            <a href="#" data-target="favourites_sidebar" class="sidenav-trigger tooltipped" data-position="right" data-tooltip="Your Favourites">
              <span class="material-icons">star</span>
            </a>
          </li>
          <li>
            <a href="#contact" class="modal-trigger tooltipped" data-position="right" data-tooltip="Contact Consultant">
              <span class="material-icons">contact_phone</span>
            </a>
          </li>
        </ul>
      </div>
      </nav>

      <ul id="basket_sidebar" class="sidenav">
        <li>
          <header ng-hide="!catalogue.pages.data.order[catalogue.active_page]">
            <span ng-bind="catalogue.pages.data.order[catalogue.active_page].length"></span> Item(s) on Page <span ng-bind="catalogue.active_page"></span>
          </header>
          <p class="center-align" ng-show="!catalogue.pages.data.order[catalogue.active_page]">There are no items to display.</p>
        </li>
        <li>
           <div class="row" ng-id="{{catalogue.pages.data.items[item].id}}" ng-repeat="(key, item) in catalogue.pages.data.order[catalogue.active_page]">
            <div class="col s12">
              <div class="card">
                <div class="card-image" ng-class="catalogue.pages.data.items[item].type">
                  <img style="width:50%;margin:0 auto;" ng-src="{{catalogue.pages.data.items[item].item.cover}}">
                  
                </div>
                <div class="card-content">
                  <h6><strong><span ng-bind="catalogue.pages.data.items[item].item.name">Card Title</span></strong></h6>
                  <p ng-bind="catalogue.pages.data.items[item].price"></p>
                  <p class="trim-info" ng-bind-html="catalogue.pages.data.items[item].item.summary | safeHtml"></p>
                </div>
                <div class="card-action center-align" ng-if="catalogue.pages.data.items[item].item.categories && 0">
                    <p><em>View similar products under</em></p>
                    <div class="chip" ng-repeat="cat in catalogue.pages.data.items[item].item.categories" ng-bind="cat.name"></div>
                  </div>
                <div class="card-action" ng-if="catalogue.pages.data.items[item].type == 'product'">
                  <a ng-href="{{prep_product_url(catalogue.pages.data.items[item].item.link)}}" target="_blank" ng-if="catalogue.pages.data.items[item].item.link">Purchase</a>
                  <a ng-bind="favourite.$data[catalogue.pages.data.items[item].id] ? 'Unfavourite' : 'Favourite'" ng-if="catalogue.pages.data.items[item].item.favourite" ng-click="favourite.set(catalogue.pages.data.items[item].id, (favourite.$data[catalogue.pages.data.items[item].id] ? 0 : 1))" href="#">Favourite</a>
                </div>
                <div class="card-action" ng-if="catalogue.pages.data.items[item].type == 'video'">
                  <a ng-href="{{catalogue.pages.data.items[item].item.link}}" target="_blank" ng-if="catalogue.pages.data.items[item].item.link">Visit</a>
                  <a class="modal-trigger" href="#video_modal" ng-if="catalogue.pages.data.items[item].item.video" ng-click="open_video_modal(catalogue.pages.data.items[item])">Watch</a>
                </div>
              </div>
            </div>
        </div>
        </li>
      </ul>

      <ul id="favourites_sidebar" class="sidenav">
        <li>
          <header>
            (<span ng-bind="favourite.$count"></span>) Favourites</span>
          </header>
          <p class="center-align" ng-show="!favourite.$count">There are no items to display.</p>
        </li>
        <li>
           <div class="row">
            <div class="col s12">
               <div ng-show="favourite.$count" class="card">
                <div class="card-content center-align">
                  <span class="card-title"><strong>Send Your Favourites</strong></span>
                  <p>You can email this list of your favourite products to <span ng-bind="consultant.data.name.first_name"></span> who can process them as an order.</p>
                </div>
                <div class="card-action">
                  <a href="#" ng-click="mail_favourites()" style="width:100%">Send</a>
                </div>
              </div>
              <div class="card" ng-repeat="(item, state) in favourite.$data" ng-if="state">
                <div class="card-image" ng-class="catalogue.pages.data.items[item].type">
                  <img style="width:50%;margin:0 auto;" ng-src="{{catalogue.pages.data.items[item].item.cover}}">
                  
                </div>
                <div class="card-content">
                  <h6><strong><span ng-bind="catalogue.pages.data.items[item].item.name">Card Title</span></strong></h6>
                  <p ng-bind="catalogue.pages.data.items[item].price"></p>
                  <p class="trim-info" ng-bind-html="catalogue.pages.data.items[item].item.summary | safeHtml"></p>
                </div>
                <div class="card-action" ng-if="catalogue.pages.data.items[item].type == 'product'">
                  <a ng-href="{{catalogue.pages.data.items[item].item.link}}" target="_blank" ng-if="catalogue.pages.data.items[item].item.link">Purchase</a>
                  <a ng-bind="favourite.$data[catalogue.pages.data.items[item].id] ? 'Unfavourite' : 'Favourite'" ng-if="catalogue.pages.data.items[item].item.favourite" ng-click="favourite.set(catalogue.pages.data.items[item].id, (favourite.$data[catalogue.pages.data.items[item].id] ? 0 : 1))" href="#">Favourite</a>
                </div>
                <div class="card-action" ng-if="catalogue.pages.data.items[item].type == 'video'">
                  <a ng-href="{{catalogue.pages.data.items[item].item.link}}" target="_blank" ng-if="catalogue.pages.data.items[item].item.link">Visit</a>
                  <a class="modal-trigger" href="#video_modal" ng-if="catalogue.pages.data.items[item].item.video" ng-click="open_video_modal(catalogue.pages.data.items[item])">Watch</a>
                </div>
              </div>
            </div>
        </div>
        </li>
      </ul>

      <div class="flip-book-container solid-container"></div>

      <div>
          <div id="video_modal" class="modal">
            <div class="modal-content">
              <!-- <h4 ng-bind="catalogue.modal.name">Modal Header</h4> -->
              <!-- <p ng-bind="catalogue.modal.description">A bunch of text</p> -->
              <div ng-bind-html="catalogue.modal.item.video | safeHtml"></div>
            </div>
            <div class="modal-footer">
              <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
          </div>
      </div>
      
          

    <!--JavaScript at end of body for optimized loading-->

    <script src="/dist/js/app.min.js"></script>
    <script src="https://code.angularjs.org/1.2.20/angular-sanitize.min.js"></script>
    <script src="/dist/js/3d-flip-book/js/libs/html2canvas.min.js"></script>
    <script src="/dist/js/3d-flip-book/js/libs/three.min.js"></script>
    <script src="/dist/js/3d-flip-book/js/libs/pdf.min.js"></script>
    <script src="/dist/js/3d-flip-book/js/dist/3dflipbook.js"></script>
    

  </body>
</html>